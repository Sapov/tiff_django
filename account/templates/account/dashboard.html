{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block body %}

{% if request.user.role == 'COURIER' %}

{% if object_list.count > 0 %}
<h2>Заказы готовые к отправке Автобусом: </h2>
<div class="row">
    <div class="col-md-12">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>Заказ №</th>
                <th>Статус</th>
                <th>Дата заказа</th>
                <th>Дата готовности</th>
            </thead>
            <tbody>
            {% for order in object_list %}
            <tr>
                <td>{{ order.id }}</td>
                <td>{{ order.status }}</td>
                <td>{{ order.created }}</td>
                <td>{{ order.date_complete }}</td>
                <td><a class="btn btn-success"
                       href="{% url 'orders:add_file_in_order' order.id %}"
                       role="button"
                       aria-expanded="false">
                    Доставка
                </a></td>

                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}


{% else %}


<div class="row">


    <!-- Earnings (Annual) Card Example -->
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-success shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                            <p><a href=" {% url 'files:create_inter' %}">Загрузка файлов для Интерьерной печати</a></p>

                        </div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">от 350 руб.</div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tasks Card Example -->
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-info shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                            <p><a href=" {% url 'files:create_large' %}">Загрузка файлов для Широкоформатной печати</a>
                            </p>

                        </div>
                        <div class="row no-gutters align-items-center">
                            <div class="col-auto">
                                <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">от 1000 руб.</div>
                            </div>
                            <div class="progress progress-sm mr-2">
                                <div class="progress-bar bg-info" role="progressbar"
                                     style="width: 50%" aria-valuenow="50" aria-valuemin="0"
                                     aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pending Requests Card Example -->
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-warning shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                            <p><a href=" {% url 'files:create_uv' %}">Загрузка файлов для UV-печати</a></p>
                        </div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">от 900 руб.</div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-comments fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Earnings (Annual) Card Example -->
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-success shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                            <p><a href=" {% url 'files:create_rollup' %}">Заказ мобильного стенда RollUp</a></p>

                        </div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">от 4950 руб.</div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<h3>Мои заказы</h3>
<a href="{% url 'orders:new_order' %}" class="btn btn-primary btn-icon-split">
                                        <span class="icon text-white-50">
                                            <i class="fas fa-flag"></i>
                                        </span>
    <span class="text">Создать заказ</span>
</a>

<div class="row">
    <div class="col-md-12">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>Заказ №</th>
                <th>Сумма заказа</th>
                <th>Оплачено</th>
                <th>Статус</th>
                <th>Дата заказа</th>
                <th>Дата готовности</th>
            </thead>
            <tbody>
            {% for order in Orders %}
            <tr>

                {% if order.status.id >= 2 %}

                <td>
                    <button type="submit" class="btn btn-primary"
            onClick="location.href='{% url 'orders:add_file_in_order' order.id %}'">Заказ № {{ order.id }}                   </button>
                </td>

                {% else %}
                <td>
                    <!--                                    <nav class="navbar navbar-expand navbar-light bg-light mb-4">-->
                    <!--                    <ul class="navbar-nav ml-auto">-->
                    <!--                                            <li class="nav-item dropdown">-->
                    <a class="btn btn-success nav-link dropdown-toggle"
                       href="{% url 'orders:add_file_in_order' order.id %}" id="navbarDropdown"
                       role="button" data-toggle="dropdown" aria-haspopup="true"
                       aria-expanded="false">
                        Заказ № {{ order.id }}
                    </a>
                    <div class="dropdown-menu dropdown-menu-right animated--grow-in"
                         aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="{% url 'orders:add_file_in_order' order.id %}">Добавить
                            файлы</a>
                        <a class="dropdown-item" href="{% url 'orders:order_pay' order.id %}">Оплатить</a>
                        <a class="dropdown-item" href="{% url 'orders:update_order' order.id %}">Редактировать</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="{% url 'orders:Delete_order' order.id %}">Удалить</a>
                    </div>
                    <!--                                            </li>-->
                    <!--                    </ul>-->
                    <!--                                    </nav>-->
                </td>
                {% endif %}


                <td>{{ order.total_price }} руб.</td>
                <td>{% if order.paid == False %}
                    <div class="mb-2">
                        <code>Не оплачено!</code>
                    </div>
                    {% else%}
                    <div class="text-success mb-2">Оплачено
                    </div>
                    {% endif %}
                    <!--                <td>{{ order.organisation_payer }}</td>-->
                    <!--                <td>{{ order.comments }}</td>-->
                <td>{% if order.status.id == 3 %}
                    <div class="mb-2">
                        <code>В работе</code>
                    </div>
                    {% elif order.status.id == 5 %}
                    <div class="text-success mb-2">Готов
                    </div>
                    {% elif order.status.id == 1 %}
                    <div class="text-warning mb-2">Готовится
                    </div>
                    {% elif order.status.id == 2 %}
                    <div class="text-primary mb-2">Оформлен
                    </div>
                    {% elif order.status.id == 4 %}
                    <div class="text-warning mb-2">Доставка
                    </div>

                    {% endif %}
                </td>
                <td>{{ order.created }}</td>
                <td>{{ order.date_complete }}</td>


            </tr>
            {% endfor %}


            </tbody>
        </table>
    </div>
</div>

{% endif %}


{% endblock %}




